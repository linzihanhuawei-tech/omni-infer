all:
  children:
    C:
      hosts:
        c0:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.1
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            decode-lb-sdk: least_conn
            prefill-lb-sdk: least_conn
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_c0
          env:
            API_PORT: 7200
            CODE_PATH: /workspace/omniinfer
            LOG_PATH: /tmp/log_path
            ROLE: proxy
    D:
      hosts:
        d0:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.19
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d0
          env:
            API_PORT: 9100
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5668
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
        d1:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.20
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d1
          env:
            API_PORT: 9116
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 16
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5684
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
        d2:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.21
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d2
          env:
            API_PORT: 9132
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 32
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5700
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
        d3:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.22
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d3
          env:
            API_PORT: 9148
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 48
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5716
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
        d4:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.23
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d4
          env:
            API_PORT: 9164
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 64
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5732
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
        d5:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.24
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d5
          env:
            API_PORT: 9180
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 80
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5748
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
        d6:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.25
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d6
          env:
            API_PORT: 9196
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 96
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5764
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
        d7:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.26
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d7
          env:
            API_PORT: 9212
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 112
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5780
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
        d8:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.27
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d8
          env:
            API_PORT: 9228
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 128
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5796
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
        d9:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.28
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d9
          env:
            API_PORT: 9244
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 144
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5812
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
        d10:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.29
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d10
          env:
            API_PORT: 9260
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 160
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5828
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
        d11:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.30
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d11
          env:
            API_PORT: 9276
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 176
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5844
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
        d12:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.31
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d12
          env:
            API_PORT: 9292
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 192
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5860
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
        d13:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.32
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d13
          env:
            API_PORT: 9308
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 208
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5876
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
        d14:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.33
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d14
          env:
            API_PORT: 9324
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 224
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5892
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
        d15:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.34
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d15
          env:
            API_PORT: 9340
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 240
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5908
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
        d16:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.35
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d16
          env:
            API_PORT: 9356
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 256
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5924
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
        d17:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.36
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            additional-config:
              graph_model_compile_config:
                level: 1
                use_ge_graph_cached: true
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              max-num-seqs: 48
              no-enable-prefix-caching: ''
            gpu-util: '0.88'
            kv-transfer-config:
              engine_id: 18
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_consumer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_DECODE
            model-path: $MODEL_PATH
            num-dp: 288
            num-servers: 16
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 1
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_d17
          env:
            API_PORT: 9372
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            PROFILER_TOKEN_THRESHOLD: 96
            PROFILER_STOP_STEP: 8
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            DECODE_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_BUFFSIZE: 1800
            HCCL_CONNECT_TIMEOUT: 2400
            HCCL_EXEC_TIMEOUT: 2400
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.19
            KV_RANK: 18
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_d.json
            MODEL_LEN_MAX_DECODE: 32768
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/global/collect_files_d/local_*merge.json)
            ROLE: decode
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 272
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5940
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.19
          master_node: d0
    P:
      hosts:
        p0:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.1
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 0
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p0
          env:
            API_PORT: 9000
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.1
            KV_RANK: 0
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5568
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.1
          master_node: p0
        p1:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.2
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 1
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p1
          env:
            API_PORT: 9016
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.2
            KV_RANK: 1
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5584
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.2
          master_node: p1
        p2:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.3
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 2
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p2
          env:
            API_PORT: 9032
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.3
            KV_RANK: 2
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5600
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.3
          master_node: p2
        p3:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.4
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 3
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p3
          env:
            API_PORT: 9048
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.4
            KV_RANK: 3
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5616
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.4
          master_node: p3
        p4:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.5
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 4
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p4
          env:
            API_PORT: 9064
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.5
            KV_RANK: 4
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5632
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.5
          master_node: p4
        p5:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.6
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 5
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p5
          env:
            API_PORT: 9080
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.6
            KV_RANK: 5
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5648
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.6
          master_node: p5
        p6:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.7
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 6
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p6
          env:
            API_PORT: 9096
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.7
            KV_RANK: 6
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5664
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.7
          master_node: p6
        p7:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.8
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 7
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p7
          env:
            API_PORT: 9112
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.8
            KV_RANK: 7
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5680
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.8
          master_node: p7
        p8:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.9
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 8
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p8
          env:
            API_PORT: 9128
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.9
            KV_RANK: 8
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5696
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.9
          master_node: p8
        p9:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.10
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 9
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p9
          env:
            API_PORT: 9144
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.10
            KV_RANK: 9
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5712
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.10
          master_node: p9
        p10:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.11
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 10
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p10
          env:
            API_PORT: 9160
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.11
            KV_RANK: 10
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5728
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.11
          master_node: p10
        p11:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.12
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 11
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p11
          env:
            API_PORT: 9176
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.12
            KV_RANK: 11
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5744
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.12
          master_node: p11
        p12:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.13
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 12
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p12
          env:
            API_PORT: 9192
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.13
            KV_RANK: 12
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5760
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.13
          master_node: p12
        p13:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.14
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 13
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p13
          env:
            API_PORT: 9208
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.14
            KV_RANK: 13
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5776
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.14
          master_node: p13
        p14:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.15
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 14
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p14
          env:
            API_PORT: 9224
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.15
            KV_RANK: 14
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5792
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.15
          master_node: p14
        p15:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.16
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 15
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p15
          env:
            API_PORT: 9240
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.16
            KV_RANK: 15
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5808
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.16
          master_node: p15
        p16:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.17
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 16
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p16
          env:
            API_PORT: 9256
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.17
            KV_RANK: 16
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5824
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.17
          master_node: p16
        p17:
          DOCKER_IMAGE_ID: image-repository:tag
          ansible_host: 127.0.0.18
          ansible_ssh_common_args: -o StrictHostKeyChecking=no -o IdentitiesOnly=yes
          ansible_ssh_private_key_file: /path/to/key
          ansible_user: root
          args:
            base-api-port: $API_PORT
            enable-mtp: ''
            extra-args:
              disable-log-requests: ''
              enable-expert-parallel: ''
              enforce-eager: ''
              max-num-batched-tokens: 30000
              max-num-seqs: 16
              no-enable-prefix-caching: ''
            gpu-util: '0.95'
            kv-transfer-config:
              engine_id: 17
              kv_buffer_device: npu
              kv_connector: AscendHcclConnectorV1
              kv_parallel_size: 1
              kv_rank: $KV_RANK
              kv_role: kv_producer
            log-dir: $LOG_PATH
            master-ip: $HOST_IP
            master-port: $MASTER_PORT
            max-model-len: $MODEL_LEN_MAX_PREFILL
            model-path: $MODEL_PATH
            num-dp: 1
            num-servers: 1
            served-model-name: pangu_ultra_moe
            server-offset: $SERVER_OFFSET
            tp: 16
          ascend_rt_visible_devices: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
          container_name: pangu18p1d_p17
          env:
            API_PORT: 9272
            ASCEND_GLOBAL_LOG_LEVEL: 3
            HCCL_OP_EXPANSION_MODE: "AIV"
            ASCEND_AICPU_PATH: /usr/local/Ascend/latest
            ASCEND_HOME_PATH: /usr/local/Ascend/latest
            ASCEND_LAUNCH_BLOCKING: 0
            ASCEND_OPP_PATH: /usr/local/Ascend/latest/opp
            ASCEND_RT_VISIBLE_DEVICES: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            ASCEND_TOOLKIT_HOME: /usr/local/Ascend/latest
            ASDOPS_LOG_LEVEL: ERROR
            ASDOPS_LOG_PATH: /root
            ASDOPS_LOG_TO_BOOST_TYPE: atb
            ASDOPS_LOG_TO_FILE: 1
            ASDOPS_LOG_TO_FILE_FLUSH: 0
            ASDOPS_LOG_TO_STDOUT: 0
            ASDSIP_HOME_PATH: /usr/local/Ascend/nnal/asdsip/latest/
            ASDSIP_LOG_LEVEL: INFO
            ASDSIP_LOG_PATH: /root
            ASDSIP_LOG_TO_BOOST_TYPE: asdsip
            ASDSIP_LOG_TO_FILE: 0
            ASDSIP_LOG_TO_FILE_FLUSH: 0
            ASDSIP_LOG_TO_STDOUT: 0
            ATB_COMPARE_TILING_EVERY_KERNEL: 0
            ATB_DEVICE_TILING_BUFFER_BLOCK_NUM: 32
            ATB_HOME_PATH: /usr/local/Ascend/nnal/atb/latest/atb/cxx_abi_1
            ATB_HOST_TILING_BUFFER_BLOCK_NUM: 128
            ATB_MATMUL_SHUFFLE_K_ENABLE: 1
            ATB_OPSRUNNER_KERNEL_CACHE_GLOABL_COUNT: 5
            ATB_OPSRUNNER_KERNEL_CACHE_LOCAL_COUNT: 1
            ATB_OPSRUNNER_SETUP_CACHE_ENABLE: 1
            ATB_SHARE_MEMORY_NAME_SUFFIX: ''
            ATB_STREAM_SYNC_EVERY_KERNEL_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_OPERATION_ENABLE: 0
            ATB_STREAM_SYNC_EVERY_RUNNER_ENABLE: 0
            ATB_WORKSPACE_MEM_ALLOC_ALG_TYPE: 1
            ATB_WORKSPACE_MEM_ALLOC_GLOBAL: 0
            AUTO_USE_UC_MEMORY: 1
            CODE_PATH: /workspace/omniinfer
            DECODE_POD_NUM: 1
            GLOBAL_DECODE_SERVER_IP_LIST: ${SERVER_IP_LIST}
            GLOBAL_RANK_TABLE_FILE_PATH: ${RANKTABLE_SAVE_PATH}/global/global_ranktable_merge.json
            GLOO_SOCKET_IFNAME: enp23s0f3
            HCCL_CONNECT_TIMEOUT: 1800
            HCCL_EXEC_TIMEOUT: 1800
            HCCL_INTRA_PCIE_ENABLE: 0
            HCCL_INTRA_ROCE_ENABLE: 1
            HOST_IP: 127.0.0.18
            KV_RANK: 17
            LCCL_DETERMINISTIC: 0
            LCCL_PARALLEL: 0
            LOCAL_DECODE_SERVER_IP_LIST: ''
            LOG_PATH: /tmp/log_path
            MASTER_PORT: 8000
            MODEL_EXTRA_CFG_PATH: ${CODE_PATH}/tests/test_config/pangu_718b_w4a8c16_a3_18p1d_p.json
            MODEL_LEN_MAX_PREFILL: 16384
            MODEL_PATH: /data/model/ascend_vllm_w8a8_mtp_1010
            OMNI_USE_DSV3: 1
            PREFILL_POD_NUM: 18
            PREFILL_SERVER_LIST: 0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15
            PREFILL_TENSOR_PARALLEL_SIZE: 16
            PYTORCH_NPU_ALLOC_CONF: expandable_segments:True
            RANKTABLE_SAVE_PATH: /tmp/ranktable_save_path
            RANK_TABLE_FILE_PATH: $(ls ${RANKTABLE_SAVE_PATH}/prefill_config/local_*$(echo
              $PREFILL_SERVER_LIST | tr -d ",").json)
            ROLE: prefill
            SERVER_IP_LIST: 127.0.0.19,127.0.0.20,127.0.0.21,127.0.0.22,127.0.0.23,127.0.0.24,127.0.0.25,127.0.0.26,127.0.0.27,127.0.0.28,127.0.0.29,127.0.0.30,127.0.0.31,127.0.0.32,127.0.0.33,127.0.0.34,127.0.0.35,127.0.0.36
            SERVER_OFFSET: 0
            SHLVL: 1
            SOCKET_IFNAME: enp23s0f3
            TASK_QUEUE_ENABLE: 2
            TNG_HOST_COPY: 1
            TOOLCHAIN_HOME: /usr/local/Ascend/latest/toolkit
            TP_SOCKET_IFNAME: enp23s0f3
            USING_LCCL_COM: 0
            VLLM_ENABLE_MC2: 1
            VLLM_LLMDATADIST_ZMQ_PORT: 5840
            VLLM_LOGGING_LEVEL: INFO
            VLLM_USE_V1: 1
            VLLM_WORKER_MULTIPROC_METHOD: fork
          host_ip: 127.0.0.18
          master_node: p17
